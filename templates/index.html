<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>MV-Sausalito Bike Path Flood Forecast</title>
    <meta name="description" content="A pure HTML example, without dependencies.">

    <!-- Pico.css -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.1.1/css/pico.min.css"
    >
    <style>
    nav {
        position: sticky;
        top: 0;
        z-index: 999;
        background-color: var(--pico-background-color);
        border-bottom: 1px solid var(--pico-muted-border-color);
    }
    section[id] {
        scroll-margin-top: 5rem;
    }
    </style>
  </head>

  <body>
    <nav class="container">
        <ul>
        <li><strong></strong></li>
        </ul>
        <ul>
        <li><a href="#predictions">Forecasted Floods</a></li>
        <li><a href="#signup">Sign Up</a></li>
        <li><a href="#about">About</a></li>
        </ul>
    </nav>
    <!-- Header -->
    <header class="container">
      <hgroup>
        <h1>Mill Valley-Sausalito Bike Path Flood Forecast</h1>
        <p>To know when you should avoid and plan a different route.</p>
        <p></p>
      </hgroup>
      <figure>
          <img
            src="assets/img/bike-path.jpg"
            alt="Photo of the bike path."
          >
      </figure>
      <p> </p>
    </header>
    <!-- ./ Header -->

    <!-- Main -->
    <main class="container">
      <!-- Preview -->

      <section id="predictions">
        <h2>Upcoming Predicted Floods</h2>
        <p>
          Below are the predicted times of high tides that have a high likelihood to flood the bike path. These are only
          tidal predictions and do not account for weather conditions such as wind, rain or storm surges that may
          also result in flooding even if the predicted tide level is below the height of the bike path.
        </p>
     <!-- Tables -->
      <section id="tables">
        <div class="overflow-auto">
          <table class="striped">
            <thead>
              <tr>
                <th scope="col">Date and time of high tide</th>
                <th scope="col">Height (feet)</th>
              </tr>
            </thead>
            <tbody>
              {% for p in predictions %}
              <tr>
                <th scope="row">{{ p.datetime }}</th>
                <td>{{ p.height }}</td>
              </tr>
              {% else %}
              <tr>
                <td colspan="2" style="color: #666; font-style: italic;">
                  No upcoming floods predicted in the next {{ forecast_days }} days.
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
      <!-- ./ Tables -->
      <!-- Sign Up -->
     <section id="signup">
        <h2>Sign Up for Flood Notifications</h2>
        <p>
          If you want to receive email notifications and stay informed about potential flooding events on the bike path, you can sign up
          below. Emails will be a weekly reminder if there are upcoming floods predicted in the next {{ forecast_days }} days. 
          No emails will be sent if there are no floods predicted.
        </p>    
        <form onsubmit="submitSignup(event)">
          <div class="grid">
            <input
              type="email"
              name="email"
              placeholder="Email address"
              aria-label="Email address"
              autocomplete="email"
              required
            >
            <button type="submit" id="signup-btn" disabled>
                Subscribe
            </button>
          </div>
          <fieldset>
            <label for="terms">
              <input 
                type="checkbox" 
                role="switch" 
                id="terms" 
                name="terms" 
                required
                onchange="document.getElementById('signup-btn').disabled = !this.checked"
              >
              I agree to the
              <a href="/privacy" target="_blank">Privacy Policy</a>
            </label>
          </fieldset>
        </form>
        <p>
        You can unsubscribe at any time with the unsubscribe link that is always included in the emails.
        </p>
      </section>
      <!-- ./ Sign Up -->

      <!-- About-->
      <section id="about">
        <h2>About</h2>
        <p>
           Sections of the bike path between Bothin Marsh and Sausalito are prone to tidal flooding when the predicted
           tide level at the <a href="https://tidesandcurrents.noaa.gov/stationhome.html?id=9414819" target="_blank">Sausalito
           station</a> is over {{ flood_threshold }} feet. 
        </p>
        <figure>
          <img
            src="assets/img/bike-path-map.png"
            alt="Map of the bike path section prone to flooding"
            width="800"
          >
        </figure>

        <h3>Data Source</h3>
        <p>
          Tidal predictions are sourced from the
          <a href="https://tidesandcurrents.noaa.gov/" target="_blank">NOAA Tides and Currents</a> service using
          their public API for the closest station to the bike path, the Sausalito Corps of Engineers Dock (Station ID: <a href="https://tidesandcurrents.noaa.gov/stationhome.html?id=9414819" target="_blank">9414819</a>).
        </p>
        <p>
            The flood threshold of {{ flood_threshold }} feet is based on observations and reports that I found from
            the <a href="https://marinbike.org/" target="_blank">Marin County Bike Coalition</a>.
        </p>
    </main>
    <!-- ./ Main -->

    <!-- Footer -->
    <footer class="container">
      <small>
        This project is open source, available on:
        <a href="https://github.com/jbandoro/mill-valley-sausalito-bikepath-flood-alert" class="secondary" target="_blank">
          <svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" style="vertical-align: middle; margin-right: 5px;">
              <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
          </svg>
          jbandoro/mill-valley-sausalito-bikepath-flood-alert
        </a>
      </small>
    </footer>
    <!-- ./ Footer -->
    <!-- Modal example -->
    <dialog id="modal-example">
      <article>
        <header>
          <button
            aria-label="Close"
            rel="prev"
            data-target="modal-example"
            onclick="toggleModal(event)"
          ></button>
          <h3>Confirm your action!</h3>
        </header>
        <p>
          Cras sit amet maximus risus. Pellentesque sodales odio sit amet augue finibus
          pellentesque. Nullam finibus risus non semper euismod.
        </p>
        <footer>
          <button
            role="button"
            class="secondary"
            data-target="modal-example"
            onclick="toggleModal(event)"
          >
            Close</button
          ><button autofocus data-target="modal-example" onclick="toggleModal(event)">
            Confirm
          </button>
        </footer>
      </article>
    </dialog>
    <!-- ./ Modal example -->
    <!-- Minimal theme switcher -->
    <script src="assets/js/minimal-theme-switcher.js"></script>

    <!-- Modal -->
    <script src="assets/js/modal.js"></script>
  </body>
</html>
